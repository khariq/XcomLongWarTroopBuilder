<!DOCTYPE html>
<html ng-app="xcomApp">
<head>
    <title>XCOM: Long War - Troop Builder</title>

	<link rel="stylesheet" href="css/bootstrap.min.css">

    <script src="scripts/linq.min.js" type="text/javascript"></script>
    <script src="scripts/jquery-2.1.1.min.js" type="text/javascript"></script>

    <script src="scripts/angular.min.js" type="text/javascript"></script>

    <script src="scripts/bootstrap.min.js"></script>

	<script src="scripts/app.js" type="text/javascript"></script>
	<script src="scripts/data_service.js" type="text/javascript"></script>

	<script src="scripts/researchController.js" type="text/javascript"></script>

	<style type="text/css">
		#filterMenu {
			
		}
	</style>
    
</head>

<body id="researchController" ng-controller="researchController">

	<nav class="navbar navbar-default">
		<div class="container-fluid">
			<div class="navbar-header">
				<a class="navbar-brand" href="#">
					<img src="lw_header.png" alt="XCOM Long War" style="height: 24px;" />
				</a>
			</div>
			
		</div><!-- /.container-fluid -->
	</nav>

	<div class="container-fluid" >
		
		<div class="row" style="margin-bottom: 3px;">
			<div class="col-lg-12">
				<div class="panel panel-primary">
					<div class="panel-heading">
						<h3 class="panel-title">Research Plan</h3>
					</div>
					<div class="panel-body">
						<div class="alert alert-success pull-left" ng-repeat="tech in researchPath" style="margin: 5px;">
							{{tech.name}}
						</div>
					</div>
				</div>
				<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#filterMenu" aria-expanded="false" aria-controls="filterMenu">
					Filter Technologies
				</button>

				<div class="collapse" id="filterMenu">
					<div class="panel panel-default">
						
						<div class="panel-body">
							<form class="form-horizontal">
								<div class="form-group">
									<div class="col-sm-2">Prerequiste</div>
									<div class="col-sm-10">
										<select class="form-control" id="prereqFilter" ng-model="filter_prereq" ng-options="tech.name group by tech.type for tech in allTechs"></select>
									</div>
								</div>
								<div class="form-group">
									<div class="col-sm-2">Unlocks</div>
									<div class="col-sm-10">
										<select class="form-control" id="unlockFilter" ng-model="filter_unlock" ng-options="unlock.opt group by unlock.type for unlock in allUnlocks"></select>
									</div>
								</div>
								
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<div class="row">
			<div class="col-md-8" id="techDiv">
				<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
					<div class="panel panel-default" ng-repeat="techLevel in techTree" >
						<div class="panel-heading" role="tab" id="heading{{$index}}">
							<h4 class="panel-title">
								
								<a data-toggle="collapse" data-parent="#accordion" href="#collapse{{$index}}" aria-expanded="true" aria-controls="collapse{{$index}}">
									Level {{$index + 1}}
								</a>
								<div class="pull-right">
									<span class="badge" style="background-color: #449d44;">{{researchedAtLevel($index)}}</span>
									<span class="badge" style="background-color: #31b0d5;">{{availableAtLevel($index)}}</span>
									<span class="badge" style="background-color: #c9302c;">{{unavailableAtLevel($index)}}</span>
								</div>
							</h4>
						</div>
						<div id="collapse{{$index}}" class="panel-collapse collapse" ng-class="$index == 0 ? 'in' : ''" role="tabpanel" aria-labelledby="heading{{$index}}">
						  <div class="panel-body">
						    <div style="margin: 5px;" class="btn-group" data-toggle="buttons" role="group" ng-repeat="tech in techLevel.techs">
								<label class="btn btn-success" 
								ng-class="techIsResearched(tech) ? 'btn-success' : techCanBeResearched(tech) ? 'btn-info' : 'btn-danger' " 
								ng-click="researchTech(tech)"
								ng-mouseover="showDescription(tech)"
								ng-mouseout="hideDescription()"
										data-container="body" data-toggle="tooltip" data-placement="right" data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus." data-html="true" data-selector="tectDiv">
									<input type="checkbox" name="tech_{{$parent.$index}}_{{$index}}" id="{{tech.id}}" />
									{{tech.name}}
								</label>
							</div>
						  </div>
						</div>
					</div>

				</div>

			</div>
			<div class="col-md-4">
				<div class="alert alert-info" ng-show="descriptionVisible">
					<div class="container-fluid">
						<div class="row">
							<div class="col-sm-12">
								<span class="pull-left">{{description.name}}</span>
								<span class="pull-right">Duration: {{description.duration}}</span>
							</div>
						</div>
						<div class="row">
							<div class="col-sm-12">Cost</div>
						</div>
						<div class="row">
							<div class="col-sm-4">Alien Alloys</div>
							<div class="col-sm-8">{{description.costs.alien_alloys}}</div>
						</div>
						<div class="row">
							<div class="col-sm-4">Elerium</div>
							<div class="col-sm-8">{{description.costs.elerium}}</div>
						</div>
						<div class="row">
							<div class="col-sm-4">Weapon Frags</div>
							<div class="col-sm-8">{{description.costs.weapon_fragments}}</div>
						</div>
						<div class="row">
							<div class="col-sm-4">Meld</div>
							<div class="col-sm-8">{{description.costs.meld}}</div>
						</div>
						<div class="row">
							<div class="col-sm-4">Other</div>
							<div class="col-sm-8">{{description.costs.other}}</div>

						</div>
						<div class="row">
							<div class="col-sm-12">Unlocks</div>
						</div>
						<div class="row">
							<div class="col-sm-4">Research</div>
						</div>
						<div class="row">
							<div class="col-sm-12">
								{{description.child_techs}}
							</div>
						</div>
						<div class="row">
							<div class="col-sm-12">Foundry</div>
						</div>
						<div class="row">
							<div class="col-sm-12">{{description.foundry}}</div>
						</div>
						<div class="row">
							<div class="col-sm-12">Other</div>
							</div>
						<div class="row">
							<div class="col-sm-12">{{description.other_unlocks}}</div>
						</div>
						<div class="row">
							<div class="col-sm-12">Council Requests</div>
							</div>
						<div class="row">
							<div class="col-sm-12">{{description.council_requests}}</div>
						</div>
						
					</div>
				</div>
			</div>
		</div>
	</div>

	<nav class="navbar navbar-default navbar-fixed-bottom">
		<div class="container-fluid">
			<div class="collapse navbar-collapse">
				<p class="navbar-text navbar-left">
					All images and text Copyright Firaxis Games.
				</p>
				<p class="navbar-text navbar-right">
					Michael Pickens, http://www.reddit.com/u/khariq
				</p>
			</div>
		</div>
	</nav>
</body>

</html>